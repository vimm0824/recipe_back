<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RECIPE</title>
    <!--[if lt IE 9]>
    <script src="/static/vendor/html5shiv/dist/html5shiv.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="/static/vendor/respond/dest/respond.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- css -->
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-gothic.css" rel="stylesheet">
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-barun-gothic.css" rel="stylesheet">
    <link rel="stylesheet" href="../../../static/styles/reset.css">
    <link rel="stylesheet" href="../../../static/styles/user.css">

    <!-- js -->
    <script src="../../../static/js/script.js"></script>
</head>
<body>
    <div class="inner">
        <h1 class="tit">비밀번호 찾기</h1>
        <div class="container--login login">
            <div class="login__form">
                <form action="">
                    <div class="input-group">
                        <label for="">이메일</label>
                        <input type="text" placeholder="이메일">
                        <span class="none">타이머</span><span id="timer" class="timer"></span>
                    </div>
                    <div class="text-center mt2">
                        <button type="button" id="abc" class="btn btn--point btn--large">인증메일 보내기</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        function $ComTimer(){
            //prototype extend
        }

        $ComTimer.prototype = {
            comSecond : ""
            , fnCallback : function(){}
            , timer : ""
            , domId : ""
            , fnTimer : function(){
                var m = Math.floor(this.comSecond / 60) + "분 " + (this.comSecond % 60) + "초";	// 남은 시간 계산
                this.comSecond--;					// 1초씩 감소
                console.log(m);
                this.domId.innerText = m;
                if (this.comSecond < 0) {			// 시간이 종료 되었으면..
                    clearInterval(this.timer);		// 타이머 해제
                    alert("인증시간이 초과하였습니다. 다시 인증해주시기 바랍니다.")
                }
            }
            ,fnStop : function(){
                clearInterval(this.timer);
            }
        }

        
        const mode = document.getElementById("abc");
        mode.addEventListener("click", function() {
            mode.innerText = "인증번호 확인";
            var AuthTimer = new $ComTimer()
            AuthTimer.comSecond = 180;
            AuthTimer.fnCallback = function(){alert("다시인증을 시도해주세요.")}
            AuthTimer.timer =  setInterval(function(){AuthTimer.fnTimer()},1000);
            AuthTimer.domId = document.getElementById("timer");
        });

        if (mode.innerText === "인증번호 보내기") {
            document.getElementById("timer").style.display = 'none';
        } else {
            document.getElementById("timer").style.display = 'block';
        }

    </script>
</body>
</html>